<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>John&#39;s Blog</title>
  
  <subtitle>ä¸å¿˜åˆå¿ƒ æ–¹å¾—å§‹ç»ˆ</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.johnmai.top/"/>
  <updated>2019-05-13T12:11:09.851Z</updated>
  <id>https://blog.johnmai.top/</id>
  
  <author>
    <name>John Mai</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å¦‚ä½•æ°¸ä¹…ä½¿ç”¨ ELK ç™½é‡‘æ®µä½</title>
    <link href="https://blog.johnmai.top/2019/05/13/%E5%A6%82%E4%BD%95%E6%B0%B8%E4%B9%85%E4%BD%BF%E7%94%A8-ELK-%E7%99%BD%E9%87%91%E6%AE%B5%E4%BD%8D/"/>
    <id>https://blog.johnmai.top/2019/05/13/å¦‚ä½•æ°¸ä¹…ä½¿ç”¨-ELK-ç™½é‡‘æ®µä½/</id>
    <published>2019-05-13T04:55:06.000Z</published>
    <updated>2019-05-13T12:11:09.851Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://john-blog-1251248233.cos.ap-guangzhou.myqcloud.com/2019-05-13-070406.jpg" alt></p><h1 id="ä¸ºå•¥è¦ä¸Šç™½é‡‘æ®µä½"><a href="#ä¸ºå•¥è¦ä¸Šç™½é‡‘æ®µä½" class="headerlink" title="ä¸ºå•¥è¦ä¸Šç™½é‡‘æ®µä½"></a>ä¸ºå•¥è¦ä¸Šç™½é‡‘æ®µä½</h1><p>å› ä¸ºæœ‰äº›é«˜çº§åŠŸèƒ½åªæœ‰ç™½é‡‘æ®µä½æ‰ä¼šæœ‰ï¼Œè™½ç„¶ä¸€å¼€å§‹æœ‰30å¤©çš„è¯•ç”¨ï¼Œä½†30å¤©ä¸å¤Ÿå•Š</p><a id="more"></a><p>å¦‚æœä¸çŸ¥é“ ELK æ˜¯å¹²å•¥çš„å¯ä»¥çœ‹çœ‹è¿™ä¸ª <a href="/2019/05/12/æ­å»º-ELK-7-x-æ—¥å¿—åˆ†æå¹³å°/">æ­å»º ELK 7.x æ—¥å¿—åˆ†æå¹³å°</a></p><h1 id="å¼€å§‹çˆ†ç ´ï¼Œä¸Šç™½é‡‘"><a href="#å¼€å§‹çˆ†ç ´ï¼Œä¸Šç™½é‡‘" class="headerlink" title="å¼€å§‹çˆ†ç ´ï¼Œä¸Šç™½é‡‘"></a>å¼€å§‹çˆ†ç ´ï¼Œä¸Šç™½é‡‘</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆæŠŠ x-pack æ‹·è´å‡ºæ¥</span></span><br><span class="line">sudo cp /usr/share/elasticsearch/modules/x-pack-core/x-pack-core-7.0.1.jar ./</span><br><span class="line"><span class="comment"># è§£å‹åˆ°x-pack-coreç›®å½•</span></span><br><span class="line">unzip x-pack-core-7.0.1.jar -d x-pack-core</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬éœ€è¦ä¸€ä¸ª java åç¼–è¯‘å·¥å…·ï¼Œå»ºè®®ä½¿ç”¨<code>luyten</code>ï¼ˆæœ¬äººç”¨è¿‡<code>jd-gui</code>å’Œ<code>jad</code>åç¼–å‡ºæ¥éƒ½æœ‰é—®é¢˜ï¼‰ï¼Œæ‰¾åˆ° <code>org/elasticsearch/license/LicenseVerifier.class</code> å’Œ <code>org/elasticsearch/xpack/core/XPackBuild.class</code></p><p>åç¼–è¯‘å¾—åˆ° <code>LicenseVerifier.java</code> åï¼Œå°†é‡Œé¢çš„<code>verifyLicense</code>å’Œ<code>verifyLicense</code>æ–¹æ³•æ”¹ä¸ºå¦‚ä¸‹å†…å®¹ï¼Œè®©è®¸å¯çš„éªŒè¯éƒ½è¿”å›<code>true</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.elasticsearch.license;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.*;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.common.bytes.*;</span><br><span class="line"><span class="keyword">import</span> java.security.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.common.xcontent.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.util.*;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.core.internal.io.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LicenseVerifier</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">verifyLicense</span><span class="params">(<span class="keyword">final</span> License license, <span class="keyword">final</span> <span class="keyword">byte</span>[] publicKeyData)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">verifyLicense</span><span class="params">(<span class="keyword">final</span> License license)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åç¼–è¯‘å¾—åˆ° <code>XPackBuild.java</code> åï¼Œå°†é‡Œé¢çš„ <code>if (path.toString().endsWith(&quot;.jar&quot;))</code> é‚£æ®µè¯­å¥æ³¨é‡Šæˆ–è€…åˆ é™¤æ‰ï¼Œè®©ç¨‹åºæ£€æµ‹ä¸åˆ°jaråŒ…è¢«ä¿®æ”¹è¿‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.elasticsearch.xpack.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.common.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.*;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.common.*;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.jar.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XPackBuild</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> XPackBuild CURRENT;</span><br><span class="line">    <span class="keyword">private</span> String shortHash;</span><br><span class="line">    <span class="keyword">private</span> String date;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@SuppressForbidden</span>(reason = <span class="string">"looks up path of xpack.jar directly"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">static</span> Path <span class="title">getElasticsearchCodebase</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> URL url = XPackBuild.class.getProtectionDomain().getCodeSource().getLocation();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> PathUtils.get(url.toURI());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (URISyntaxException bogus) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(bogus);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    XPackBuild(<span class="keyword">final</span> String shortHash, <span class="keyword">final</span> String date) &#123;</span><br><span class="line">        <span class="keyword">this</span>.shortHash = shortHash;</span><br><span class="line">        <span class="keyword">this</span>.date = date;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">shortHash</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.shortHash;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">date</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.date;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> Path path = getElasticsearchCodebase();</span><br><span class="line">        String shortHash = <span class="keyword">null</span>;</span><br><span class="line">        String date = <span class="keyword">null</span>;</span><br><span class="line">        Label_0109: &#123;</span><br><span class="line">            <span class="comment">// if (path.toString().endsWith(".jar")) &#123;</span></span><br><span class="line">            <span class="comment">//     try &#123;</span></span><br><span class="line">            <span class="comment">//         final JarInputStream jar = new JarInputStream(Files.newInputStream(path, new OpenOption[0]));</span></span><br><span class="line">            <span class="comment">//         try &#123;</span></span><br><span class="line">            <span class="comment">//             final Manifest manifest = jar.getManifest();</span></span><br><span class="line">            <span class="comment">//             shortHash = manifest.getMainAttributes().getValue("Change");</span></span><br><span class="line">            <span class="comment">//             date = manifest.getMainAttributes().getValue("Build-Date");</span></span><br><span class="line">            <span class="comment">//             jar.close();</span></span><br><span class="line">            <span class="comment">//         &#125;</span></span><br><span class="line">            <span class="comment">//         catch (Throwable t) &#123;</span></span><br><span class="line">            <span class="comment">//             try &#123;</span></span><br><span class="line">            <span class="comment">//                 jar.close();</span></span><br><span class="line">            <span class="comment">//             &#125;</span></span><br><span class="line">            <span class="comment">//             catch (Throwable t2) &#123;</span></span><br><span class="line">            <span class="comment">//                 t.addSuppressed(t2);</span></span><br><span class="line">            <span class="comment">//             &#125;</span></span><br><span class="line">            <span class="comment">//             throw t;</span></span><br><span class="line">            <span class="comment">//         &#125;</span></span><br><span class="line">            <span class="comment">//         break Label_0109;</span></span><br><span class="line">            <span class="comment">//     &#125;</span></span><br><span class="line">            <span class="comment">//     catch (IOException e) &#123;</span></span><br><span class="line">            <span class="comment">//         throw new RuntimeException(e);</span></span><br><span class="line">            <span class="comment">//     &#125;</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">            shortHash = <span class="string">"Unknown"</span>;</span><br><span class="line">            date = <span class="string">"Unknown"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        CURRENT = <span class="keyword">new</span> XPackBuild(shortHash, date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>æ³¨æ„ä¸è¦ç›´æ¥å¤åˆ¶è¿™äº›ä»£ç ï¼Œä¿®æ”¹ä»…ä¾›å‚è€ƒï¼Œæœ‰å¯èƒ½å…¶ä»–ç‰ˆæœ¬çš„ä»£ç ä¼šæœ‰ç‚¹ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä»£ç å‚è€ƒå»æ”¹å°±å¥½äº†</code></p><p>ä¿®æ”¹å®Œåï¼ŒæŠŠ <code>LicenseVerifier.java</code> å’Œ <code>XPackBuild.java</code> é‡æ–°ç¼–è¯‘<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">javac -cp <span class="string">"/usr/share/elasticsearch/lib/elasticsearch-7.0.1.jar:/usr/share/elasticsearch/lib/lucene-core-8.0.0.jar:/usr/share/elasticsearch/modules/x-pack-core/x-pack-core-7.0.1.jar:/usr/share/elasticsearch/lib/elasticsearch-core-7.0.1.jar"</span> LicenseVerifier.java</span><br><span class="line"></span><br><span class="line">javac -cp <span class="string">"/usr/share/elasticsearch/lib/elasticsearch-7.0.1.jar:/usr/share/elasticsearch/lib/lucene-core-8.0.0.jar:/usr/share/elasticsearch/modules/x-pack-core/x-pack-core-7.0.1.jar:/usr/share/elasticsearch/lib/elasticsearch-core-7.0.1.jar"</span> XPackBuild.java</span><br></pre></td></tr></table></figure></p><p><code>æ³¨æ„ç¼–è¯‘éœ€è¦ä¾èµ–è¿™äº›åŒ…ï¼Œæ‰€ä»¥è¯·æ ¹æ®è‡ªå·±å®‰è£…çš„ç‰ˆæœ¬å»é€‰æ‹©è¿™åŒ…</code></p><p>ç¼–è¯‘å®Œæˆåï¼Œå°†å¾—åˆ°çš„ <code>LicenseVerifier.class</code> å’Œ <code>XPackBuild.class</code> è¦†ç›–åˆ° <code>org/elasticsearch/license/LicenseVerifier.class</code> å’Œ <code>org/elasticsearch/xpack/core/XPackBuild.class</code></p><p>æœ€åé‡æ–°æ‰“åŒ…jar</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> x-pack-core</span><br><span class="line"><span class="comment"># æ‰“åŒ…å½“å‰ç›®å½•</span></span><br><span class="line">jar -cvf x-pack-core-7.0.1.jar ./</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“åŒ…å¥½ä¹‹å è¦†ç›–åŸæ¥çš„jaråŒ…</span></span><br><span class="line">sudo cp x-pack-core-7.0.1.jar /usr/share/elasticsearch/modules/x-pack-core/</span><br><span class="line"><span class="comment"># é‡å¯</span></span><br><span class="line">sudo service elasticsearch restart</span><br></pre></td></tr></table></figure><p>å»æ³¨å†Œä¸€ä¸ªå…è´¹ä¸€å¹´çš„License <a href="https://license.elastic.co/registration" target="_blank" rel="noopener">https://license.elastic.co/registration</a>ï¼Œæ³¨å†Œå®Œæˆåä¼šç»™ä½ å‘é€ä¸‹è½½åœ°å€</p><p><img src="https://john-blog-1251248233.cos.ap-guangzhou.myqcloud.com/2019-05-13-062752.png" alt></p><p>ä¸‹è½½ä¹‹åä½ ä¼šå¾—åˆ°ä¸€ä¸ªjsonæ–‡ä»¶<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"license"</span>: &#123;</span><br><span class="line">        <span class="attr">"uid"</span>: <span class="string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>,</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"basic"</span>,</span><br><span class="line">        <span class="attr">"issue_date_in_millis"</span>: <span class="number">1557705600000</span>,</span><br><span class="line">        <span class="attr">"expiry_date_in_millis"</span>: <span class="number">1589414399999</span>,</span><br><span class="line">        <span class="attr">"max_nodes"</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">"issued_to"</span>: <span class="string">"~~~~~~~~~~~"</span>,</span><br><span class="line">        <span class="attr">"issuer"</span>: <span class="string">"Web Form"</span>,</span><br><span class="line">        <span class="attr">"signature"</span>: <span class="string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>,</span><br><span class="line">        <span class="attr">"start_date_in_millis"</span>: <span class="number">1557705600000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>å°†<code>type</code>çš„å‚æ•°æ”¹ä¸º<code>platinum</code>(å³ï¼šâ€˜ç™½é‡‘ç‰ˆâ€™)</li><li>å°†<code>expiry_date_in_millis</code> çš„å‚æ•°æ”¹æˆä½ æƒ³è¦çš„è¿‡æœŸæ—¶é—´ï¼ˆè¿™é‡Œç”¨çš„æ˜¯æ¯«ç§’ï¼‰å¯ä»¥æ”¹ä¸º<code>4070883661000</code>è¿‡æœŸæ—¶é—´éƒ½æ˜¯åˆ°2099å¹´~~~</li><li>å…¶ä»–å‚æ•°å°½é‡ä¸è¦æ”¹</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"license"</span>: &#123;</span><br><span class="line">        <span class="attr">"uid"</span>: <span class="string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>,</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"platinum"</span>,</span><br><span class="line">        <span class="attr">"issue_date_in_millis"</span>: <span class="number">1557705600000</span>,</span><br><span class="line">        <span class="attr">"expiry_date_in_millis"</span>: <span class="number">4070883661000</span>,</span><br><span class="line">        <span class="attr">"max_nodes"</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">"issued_to"</span>: <span class="string">"~~~~~~~~~~~"</span>,</span><br><span class="line">        <span class="attr">"issuer"</span>: <span class="string">"Web Form"</span>,</span><br><span class="line">        <span class="attr">"signature"</span>: <span class="string">"~~~~~~~~~~~~~~~~~~~~~~~~~~~~"</span>,</span><br><span class="line">        <span class="attr">"start_date_in_millis"</span>: <span class="number">1557705600000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>/etc/elasticsearch/elasticsearch.yml</code> æš‚æ—¶å…ˆå…³é—­ <code>xpack</code> (è®°å¾—é‡å¯elasticsearch)<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">xpack.security.enabled:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></p><p>åœ¨ kibana ä¸­ <code>ç®¡ç† â†’ è®¸å¯ç®¡ç† â†’ æ›´æ–°è®¸å¯</code><br><img src="https://john-blog-1251248233.cos.ap-guangzhou.myqcloud.com/2019-05-13-063553.png" alt></p><p>ä¿®æ”¹ <code>/etc/elasticsearch/elasticsearch.yml</code> é‡æ–°æ‰“å¼€ <code>xpack</code> (è®°å¾—é‡å¯elasticsearch)<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">xpack.security.enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></p><p>æ›´æ–°åæ˜¾ç¤ºè¿™æ ·å°±okäº†</p><p><img src="https://john-blog-1251248233.cos.ap-guangzhou.myqcloud.com/2019-05-13-064147.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://john-blog-1251248233.cos.ap-guangzhou.myqcloud.com/2019-05-13-070406.jpg&quot; alt&gt;&lt;/p&gt;
&lt;h1 id=&quot;ä¸ºå•¥è¦ä¸Šç™½é‡‘æ®µä½&quot;&gt;&lt;a href=&quot;#ä¸ºå•¥è¦ä¸Šç™½é‡‘æ®µä½&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºå•¥è¦ä¸Šç™½é‡‘æ®µä½&quot;&gt;&lt;/a&gt;ä¸ºå•¥è¦ä¸Šç™½é‡‘æ®µä½&lt;/h1&gt;&lt;p&gt;å› ä¸ºæœ‰äº›é«˜çº§åŠŸèƒ½åªæœ‰ç™½é‡‘æ®µä½æ‰ä¼šæœ‰ï¼Œè™½ç„¶ä¸€å¼€å§‹æœ‰30å¤©çš„è¯•ç”¨ï¼Œä½†30å¤©ä¸å¤Ÿå•Š&lt;/p&gt;
    
    </summary>
    
      <category term="è¿ç»´" scheme="https://blog.johnmai.top/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="ELK" scheme="https://blog.johnmai.top/tags/ELK/"/>
    
      <category term="Elasticsearch" scheme="https://blog.johnmai.top/tags/Elasticsearch/"/>
    
      <category term="Kibana" scheme="https://blog.johnmai.top/tags/Kibana/"/>
    
      <category term="Logstash" scheme="https://blog.johnmai.top/tags/Logstash/"/>
    
  </entry>
  
  <entry>
    <title>æ­å»º ELK 7.x æ—¥å¿—åˆ†æå¹³å°</title>
    <link href="https://blog.johnmai.top/2019/05/12/%E6%90%AD%E5%BB%BA-ELK-7-x-%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0/"/>
    <id>https://blog.johnmai.top/2019/05/12/æ­å»º-ELK-7-x-æ—¥å¿—åˆ†æå¹³å°/</id>
    <published>2019-05-12T09:04:23.000Z</published>
    <updated>2019-05-13T07:28:36.712Z</updated>
    
    <content type="html"><![CDATA[<img src="https://john-blog-1251248233.cos.ap-guangzhou.myqcloud.com/2019-05-12-IMG_3985_w21.png" title="alt:æ­å»º ELK 7.x æ—¥å¿—åˆ†æå¹³å°"><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ç”±äºå…¬å¸é¡¹ç›®ä¼—å¤šï¼Œè¦å¯¹è¿™ä¹ˆå¤šé¡¹ç›®æ—¥å¿—è¿›è¡Œå·¡æŸ¥å’Œç›‘æ§ï¼Œä¸€ä¸ªä¸ªå»æŸ¥ï¼Œæ•ˆç‡ä¼šæ¯”è¾ƒä½ã€‚å› æ­¤éœ€è¦ä¸€ä¸ªå¯¹æ—¥å¿—è¿›è¡Œç»Ÿä¸€ç®¡ç†çš„å·¥å…·ã€‚so æœ¬äººå°±é‡‡ç”¨äº† ELK æ–¹æ¡ˆã€‚</p><h1 id="ä»€ä¹ˆæ˜¯-ELK-â“"><a href="#ä»€ä¹ˆæ˜¯-ELK-â“" class="headerlink" title="ä»€ä¹ˆæ˜¯ ELK â“"></a>ä»€ä¹ˆæ˜¯ ELK â“</h1><p>ELK æ˜¯ç”± Elasticsearch + Logstash + Kibana è¿™ä¸‰ä¸ªå·¥å…·ç»„æˆçš„ä¸€å¥—å¼€æºæ—¥å¿—ç›‘æ§ã€æ—¥å¿—å¯è§†åŒ–ç®¡ç†çš„è§£å†³æ–¹æ¡ˆ</p><a id="more"></a><h1 id="å®‰è£…-âš™ï¸"><a href="#å®‰è£…-âš™ï¸" class="headerlink" title="å®‰è£… âš™ï¸"></a>å®‰è£… âš™ï¸</h1><p>è¿™é‡Œæœ‰ä¸¤ç§å®‰è£…æ–¹å¼ï¼Œapt å¸¸è§„å®‰è£… å’Œ Docker æ–¹å¼ã€‚æœ¬äººåœ¨å…¬å¸é‡‡ç”¨çš„æ˜¯ apt å¸¸è§„å®‰è£…ï¼Œè‡ªç”¨çš„æœåŠ¡å™¨æ˜¯ç”¨ Docker æ–¹å¼</p><h2 id="aptå¸¸è§„å®‰è£…"><a href="#aptå¸¸è§„å®‰è£…" class="headerlink" title="aptå¸¸è§„å®‰è£…"></a>aptå¸¸è§„å®‰è£…</h2><h3 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h3><blockquote><p>æœ¬æ–‡ä½¿ç”¨ç¯å¢ƒï¼š<br>Ubuntu 16.04.4 LTS<br>Jdk 1.8.0_191<br>Elasticsearch 7.0.1<br>Kibana 7.0.1<br>Logstash 7.0.1</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">sudo apt-get install apt-transport-https</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"deb https://artifacts.elastic.co/packages/7.x/apt stable main"</span> | sudo tee -a /etc/apt/sources.list.d/elastic-7.x.list</span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®˜ç½‘çš„é€Ÿåº¦æœ‰ç‚¹å¿™ï¼Œæƒ³å¿«ç‚¹çš„è¯ï¼Œè¿™é‡Œå¯ä»¥æ¢æˆå›½å†…é•œåƒ</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"deb https://artifacts.elastic.co/packages/7.x/apt stable main"</span> | sudo tee -a /etc/apt/sources.list.d/elastic-7.x.list</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-elasticsearch-kibana-logstash"><a href="#å®‰è£…-elasticsearch-kibana-logstash" class="headerlink" title="å®‰è£… elasticsearch kibana logstash"></a>å®‰è£… elasticsearch kibana logstash</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install elasticsearch kibana logstash</span><br></pre></td></tr></table></figure><p><code>æ³¨æ„ï¼šELK ä¾èµ– Javaï¼ŒåŠ¡å¿…å®‰è£…å¥½ Javaã€‚ï¼ˆ æœ¬äººä¹‹å‰ç”¨ Java 9 å¥½åƒæœ‰ç‚¹é—®é¢˜ï¼Œå¦‚æœç”¨ Java 9 ä¹Ÿé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å°è¯•æ”¹ä¸ºJava 8 ï¼‰</code></p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>å…ˆé…ç½®ä¸€ä¸‹ elasticsearch</p><p><code>/etc/elasticsearch/elasticsearch.yml</code><br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">network.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"><span class="string">http.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="string">cluster.initial_master_nodes:</span> <span class="string">["node-1"]</span></span><br></pre></td></tr></table></figure></p><p>æ¥ç€é…ç½®ä¸€ä¸‹ kibana</p><p><code>/etc/kibana/kibana.yml</code><br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">server.port:</span> <span class="number">5601</span></span><br><span class="line"><span class="string">server.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"><span class="string">elasticsearch.hosts:</span> <span class="string">["http://127.0.0.1:9200"]</span></span><br><span class="line"><span class="comment"># å¯ä»¥ä½¿ç”¨ä¸­æ–‡</span></span><br><span class="line"><span class="string">i18n.locale:</span> <span class="string">"zh-CN"</span></span><br></pre></td></tr></table></figure></p><p>æœ€åé‡å¯ä¸€ä¸‹ elasticsearch &amp; kibana</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo service elasticsearch restart</span><br><span class="line">sudo service kibana restart</span><br></pre></td></tr></table></figure><p>æœ€åè®¿é—®ä¸€ä¸‹ <a href="http://127.0.0.1:5601" target="_blank" rel="noopener">http://127.0.0.1:5601</a> èƒ½è¿›å…¥åˆ° kibana å°±OKäº†</p><p><img src="https://john-blog-1251248233.cos.ap-guangzhou.myqcloud.com/2019-05-12-140045.png" alt></p><h2 id="Docker-æ–¹å¼"><a href="#Docker-æ–¹å¼" class="headerlink" title="Docker æ–¹å¼"></a>Docker æ–¹å¼</h2><p>è¿™é‡Œæˆ‘æ˜¯ç”¨ <a href="https://github.com/deviantony" target="_blank" rel="noopener">deviantony</a> ç¼–å†™å¥½çš„ <code>docker-composer</code> è„šæœ¬ <a href="https://github.com/deviantony/docker-elk" target="_blank" rel="noopener">docker-elk</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/deviantony/docker-elk.git</span><br><span class="line"><span class="built_in">cd</span> docker-elk</span><br><span class="line">docker-composer up -d</span><br></pre></td></tr></table></figure><p>ç­‰dockeræ„å»ºå®Œï¼Œå°±å¯ä»¥è®¿é—® <a href="http://127.0.0.1:5601" target="_blank" rel="noopener">http://127.0.0.1:5601</a></p><h1 id="å¼€å¯ç”¨æˆ·ç®¡ç†"><a href="#å¼€å¯ç”¨æˆ·ç®¡ç†" class="headerlink" title="å¼€å¯ç”¨æˆ·ç®¡ç†"></a>å¼€å¯ç”¨æˆ·ç®¡ç†</h1><p>å› ä¸º ELK æ˜¯æ²¡æœ‰ç™»å½•ï¼Œç”¨æˆ·ç®¡ç†ç­‰åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¼€å¯ <code>x-pack</code> ã€‚</p><ol><li><p>ç”±äº <code>x-pack</code> æ˜¯ä»˜è´¹åŠŸèƒ½ï¼Œåœ¨ kibana ä¸­ <code>ç®¡ç† â†’ è®¸å¯ç®¡ç†</code><br> <img src="https://john-blog-1251248233.cos.ap-guangzhou.myqcloud.com/2019-05-13-024734.png" alt></p></li><li><p>åœ¨<code>/etc/elasticsearch/elasticsearch.yml</code>æ·»åŠ <code>xpack.security.enabled: true</code>ã€‚æ·»åŠ å®Œåè®°å¾—é‡å¯<code>sudo service elasticsearch restart</code></p></li><li><p>è®¾ç½®å¯†ç </p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™ä¸ªæ˜¯æ‰‹åŠ¨è®¾ç½®å¯†ç </span></span><br><span class="line">sudo /usr/share/elasticsearch/bin/elasticsearch-setup-passwords interactive</span><br><span class="line"><span class="comment"># å¦‚æœä¸æƒ³æ‰‹åŠ¨è®¾ç½®å¯†ç ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªåŠ¨è®¾ç½®</span></span><br><span class="line">sudo /usr/share/elasticsearch/bin/elasticsearch-setup-passwords auto</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®å¥½å¯†ç åï¼Œåœ¨<code>/etc/kibana/kibana.yml</code>æ·»åŠ ã€‚ï¼ˆæ·»åŠ å¥½åè®°å¾—é‡å¯kibana <code>sudo service kibana restart</code>ï¼‰</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">elasticsearch.username:</span> <span class="string">"elastic"</span></span><br><span class="line"><span class="string">elasticsearch.password:</span> <span class="string">"è¿™é‡Œå¡«å†™ä½ è®¾ç½®çš„å¯†ç "</span></span><br></pre></td></tr></table></figure></li><li><p>æœ€åè®¿é—® <a href="http://127.0.0.1:5601" target="_blank" rel="noopener">http://127.0.0.1:5601</a><br> <img src="https://john-blog-1251248233.cos.ap-guangzhou.myqcloud.com/2019-05-13-031721.png" alt></p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;img src=&quot;https://john-blog-1251248233.cos.ap-guangzhou.myqcloud.com/2019-05-12-IMG_3985_w21.png&quot; title=&quot;alt:æ­å»º ELK 7.x æ—¥å¿—åˆ†æå¹³å°&quot;&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;ç”±äºå…¬å¸é¡¹ç›®ä¼—å¤šï¼Œè¦å¯¹è¿™ä¹ˆå¤šé¡¹ç›®æ—¥å¿—è¿›è¡Œå·¡æŸ¥å’Œç›‘æ§ï¼Œä¸€ä¸ªä¸ªå»æŸ¥ï¼Œæ•ˆç‡ä¼šæ¯”è¾ƒä½ã€‚å› æ­¤éœ€è¦ä¸€ä¸ªå¯¹æ—¥å¿—è¿›è¡Œç»Ÿä¸€ç®¡ç†çš„å·¥å…·ã€‚so æœ¬äººå°±é‡‡ç”¨äº† ELK æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h1 id=&quot;ä»€ä¹ˆæ˜¯-ELK-â“&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-ELK-â“&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ ELK â“&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ ELK â“&lt;/h1&gt;&lt;p&gt;ELK æ˜¯ç”± Elasticsearch + Logstash + Kibana è¿™ä¸‰ä¸ªå·¥å…·ç»„æˆçš„ä¸€å¥—å¼€æºæ—¥å¿—ç›‘æ§ã€æ—¥å¿—å¯è§†åŒ–ç®¡ç†çš„è§£å†³æ–¹æ¡ˆ&lt;/p&gt;
    
    </summary>
    
      <category term="è¿ç»´" scheme="https://blog.johnmai.top/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="ELK" scheme="https://blog.johnmai.top/tags/ELK/"/>
    
      <category term="Elasticsearch" scheme="https://blog.johnmai.top/tags/Elasticsearch/"/>
    
      <category term="Kibana" scheme="https://blog.johnmai.top/tags/Kibana/"/>
    
      <category term="Logstash" scheme="https://blog.johnmai.top/tags/Logstash/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨ ionic 3 ä¸­ä½¿ç”¨ URL Scheme</title>
    <link href="https://blog.johnmai.top/2018/02/03/%E5%A6%82%E4%BD%95%E5%9C%A8-ionic-3-%E4%B8%AD%E4%BD%BF%E7%94%A8-URL-Scheme/"/>
    <id>https://blog.johnmai.top/2018/02/03/å¦‚ä½•åœ¨-ionic-3-ä¸­ä½¿ç”¨-URL-Scheme/</id>
    <published>2018-02-03T07:29:07.000Z</published>
    <updated>2019-05-13T07:29:11.317Z</updated>
    
    <content type="html"><![CDATA[<img src="https://user-gold-cdn.xitu.io/2018/2/3/16157498aa157d6d?imageView2/1/w/1304/h/734/q/85/format/webp/interlace/1" title="alt:å¦‚ä½•åœ¨ ionic 3 ä¸­ä½¿ç”¨ URL Scheme"><h3 id="è™¾æ‰¯è›‹ğŸ¥š"><a href="#è™¾æ‰¯è›‹ğŸ¥š" class="headerlink" title="è™¾æ‰¯è›‹ğŸ¥š"></a>è™¾æ‰¯è›‹ğŸ¥š</h3><p>ç¬¬ä¸€æ¬¡åœ¨æ˜é‡‘å†™ä¸œè¥¿ï¼Œæœ‰ç‚¹ç´§å¼ ã€‚</p><p>æˆ‘ä¸ºå•¥å†™è¿™ä¸ªï¼Œæ˜¯å› ä¸ºæˆ‘æœ€è¿‘ç”¨ ionic å¼€å‘ä¸€ä¸ª app ï¼Œéœ€è¦ç”¨ URL Scheme ã€‚æè¿™ä¸ª URL Scheme æŠ˜è…¾äº†ä¸€ä¸‹ï¼Œæ‰€ä»¥å†™ä¸‹æ­¤æ–‡ï¼Œå¹¶åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ã€‚ğŸ˜</p><h3 id="ä»€ä¹ˆæ˜¯-URL-Schemeâ“"><a href="#ä»€ä¹ˆæ˜¯-URL-Schemeâ“" class="headerlink" title="ä»€ä¹ˆæ˜¯ URL Schemeâ“"></a>ä»€ä¹ˆæ˜¯ URL Schemeâ“</h3><p>ç®€å•çš„è¯´ï¼ŒURL Schemeå°±æ˜¯ä¸€ä¸ªå¯ä»¥è®©appç›¸äº’ä¹‹é—´å¯ä»¥è·³è½¬çš„åè®®ã€‚åˆ—å¦‚ï¼šå¾®ä¿¡çš„ URL Scheme å°±æ˜¯ <code>weixin://</code>ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <code>weixin://scanqrcode</code> å¯ä»¥è·³è½¬åˆ°å¾®ä¿¡çš„æ‰«ä¸€æ‰«åŠŸèƒ½ã€‚</p><a id="more"></a><p><img width="49%" src="https://user-gold-cdn.xitu.io/2018/2/3/16157617ac06adaa?w=750&h=1334&f=png&s=163774"><br><img width="49%" src="https://user-gold-cdn.xitu.io/2018/2/3/1615762402b6bbb8?w=750&h=1334&f=png&s=2249094"></p><blockquote><p>æ›´å¤š URL Scheme ï¼š<a href="https://www.zhihu.com/question/19907735" target="_blank" rel="noopener">https://www.zhihu.com/question/19907735</a></p></blockquote><h2 id="å¼€å§‹æ’¸ä»£ç -ğŸ’»"><a href="#å¼€å§‹æ’¸ä»£ç -ğŸ’»" class="headerlink" title="å¼€å§‹æ’¸ä»£ç  ğŸ’»"></a>å¼€å§‹æ’¸ä»£ç  ğŸ’»</h2><h3 id="æ„å»ºdemo-ğŸ’"><a href="#æ„å»ºdemo-ğŸ’" class="headerlink" title="æ„å»ºdemo ğŸ’"></a>æ„å»ºdemo ğŸ’</h3><p>æˆ‘ä»¬å°±ç”¨ionicçš„tabsæ¨¡æ¿æ„å»ºä¸€ä¸ªdemoå§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ionic start myApp tabs</span><br></pre></td></tr></table></figure><p><img src="https://user-gold-cdn.xitu.io/2018/2/3/161576df71181cb6?w=1604&amp;h=978&amp;f=png&amp;s=1293904" alt></p><h3 id="å®‰è£…-URL-Scheme-Cordova-æ’ä»¶-ğŸ”§"><a href="#å®‰è£…-URL-Scheme-Cordova-æ’ä»¶-ğŸ”§" class="headerlink" title="å®‰è£… URL Scheme Cordova æ’ä»¶ ğŸ”§"></a>å®‰è£… URL Scheme Cordova æ’ä»¶ ğŸ”§</h3><p>æˆ‘ä»¬éœ€è¦çš„å®‰è£…çš„ URL Scheme Cordova æ’ä»¶æ˜¯<code>cordova-plugin-customurlscheme</code></p><p>æ’ä»¶åœ°å€ï¼š<a href="https://github.com/EddyVerbruggen/Custom-URL-scheme" target="_blank" rel="noopener">https://github.com/EddyVerbruggen/Custom-URL-scheme</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ionic cordova plugin add cordova-plugin-customurlscheme --variable URL_SCHEME=myapp-mak</span><br></pre></td></tr></table></figure><p>åœ¨æ ¹ç›®å½•ä½¿ç”¨æ­¤å‘½ä»¤è¿›è¡Œå®‰è£…,<code>URL_SCHEME=myapp-mak</code>æˆ‘å®šä¹‰çš„åè®®åç§°æ˜¯<code>myapp-mak</code>ã€‚åç§°éšä¾¿èµ·ï¼Œåªè¦ä¸è·Ÿå…¶ä»–appå†²çªå°±å¥½ã€‚ğŸ˜</p><blockquote><p>å¦‚æœå®‰è£…åæƒ³ä¿®æ”¹åè®®åç§°çš„ï¼Œå¯ä»¥å»æ”¹config.xmlå’Œpackage.jsonã€‚æ‰“å¼€å°±èƒ½çœ‹åˆ°ä¹‹å‰å®šä¹‰çš„åè®®åç§°äº†</p></blockquote><p><img src="https://user-gold-cdn.xitu.io/2018/2/3/161576e602dd4f31?w=1604&amp;h=978&amp;f=png&amp;s=1355825" alt></p><h3 id="ç¼–è¯‘å®‰è£…appåˆ°æ‰‹æœºä¸ŠğŸ“±"><a href="#ç¼–è¯‘å®‰è£…appåˆ°æ‰‹æœºä¸ŠğŸ“±" class="headerlink" title="ç¼–è¯‘å®‰è£…appåˆ°æ‰‹æœºä¸ŠğŸ“±"></a>ç¼–è¯‘å®‰è£…appåˆ°æ‰‹æœºä¸ŠğŸ“±</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ionic cordova run ios</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªåè®®<code>myapp-mak://éšä¾¿å†™</code>æ‰“å¼€æ­¤appã€‚å¦‚ï¼šåœ¨æµè§ˆå™¨æ‰“å¼€<code>myapp-mak://test</code></p><h3 id="å¦‚ä½•çŸ¥é“æ˜¯å“ªä¸ªURLæ‰“å¼€çš„Appâ“"><a href="#å¦‚ä½•çŸ¥é“æ˜¯å“ªä¸ªURLæ‰“å¼€çš„Appâ“" class="headerlink" title="å¦‚ä½•çŸ¥é“æ˜¯å“ªä¸ªURLæ‰“å¼€çš„Appâ“"></a>å¦‚ä½•çŸ¥é“æ˜¯å“ªä¸ªURLæ‰“å¼€çš„Appâ“</h3><ul><li>è·å–url<br><img src="https://user-gold-cdn.xitu.io/2018/2/3/1615777ec59a311b?w=2492&amp;h=1468&amp;f=png&amp;s=396086" alt></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//è·å–urlå¹¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</span><br><span class="line">(window as any).handleOpenURL = (url: string) =&gt; &#123;</span><br><span class="line">  console.log(url);</span><br><span class="line">  this.url = url;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™å¥ä»£ç æ˜¯è·å–æ˜¯å“ªä¸ªURLæ‰“å¼€çš„appäº†ã€‚</p><blockquote><p>æ³¨æ„ï¼šhandleOpenURLå‡½æ•°å¿…é¡»æ˜¯å…¨å±€å”¯ä¸€ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸æ¥æ”¶</p></blockquote><ul><li>ä¿®æ”¹config.xml</li></ul><p><img src="https://user-gold-cdn.xitu.io/2018/2/3/161577f051bab113?w=2492&amp;h=1468&amp;f=png&amp;s=721702" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;allow-intent href=&quot;myapp-mak:*&quot; /&gt;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¿…é¡»å†™ä¸Šè¿™å¥è¯ï¼Œè¿™å¥æ˜¯å…è®¸æˆ‘ä»¬å®šä¹‰çš„åè®®å¯ä»¥ä¼ é€’ã€‚å¦åˆ™handleOpenURLä¹Ÿæ— æ³•æ¥æ”¶åˆ°URL</p><h3 id="æµ‹è¯•-âš™"><a href="#æµ‹è¯•-âš™" class="headerlink" title="æµ‹è¯• âš™"></a>æµ‹è¯• âš™</h3><ol><li>é‡æ–°ç¼–è¯‘å®‰è£…</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ionic cordova run ios</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨æµè§ˆå™¨æ‰“å¼€<code>myapp-mak://test</code></li></ol><p><img width="49%" src="https://user-gold-cdn.xitu.io/2018/2/3/1615783f058b6059?w=750&h=1334&f=png&s=161970"><br><img width="49%" src="https://user-gold-cdn.xitu.io/2018/2/3/161578612114f365?w=750&h=1334&f=png&s=114825"></p><blockquote><p>è·å–URLæœ‰å•¥ä½œç”¨å‘¢ï¼Ÿè·å–URLä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­URLçš„ä¸åŒè¿›è¡Œä¸åŒçš„æ“ä½œï¼Œä¾‹å¦‚ï¼šæ‰“å¼€æŒ‡å®šé¡µé¢ã€åˆ†äº«ã€æ”¯ä»˜â€¦â€¦</p></blockquote><h3 id="ç»“æŸ-ğŸ˜"><a href="#ç»“æŸ-ğŸ˜" class="headerlink" title="ç»“æŸ ğŸ˜"></a>ç»“æŸ ğŸ˜</h3><p>ç¬¬ä¸€æ¬¡å†™æ–‡ï¼Œå†™å¾—ä¸æ˜¯å¾ˆå¥½ã€‚ğŸ˜œ</p><p>é™¤äº†é€šè¿‡URL Schemeæ–¹å¼æ¥æ‰“å¼€appã€‚å…¶å®å¯ä»¥ä½¿ç”¨Universal Links &amp;&amp; Deep Linking æ¥æ‰“å¼€appã€‚</p><blockquote><p>åˆ†äº«ä¸€ä¸ª Universal Links &amp;&amp; Deep Linking Cordova æ’ä»¶ç»™å¤§å®¶<a href="https://github.com/nordnet/cordova-universal-links-plugin" target="_blank" rel="noopener">https://github.com/nordnet/cordova-universal-links-plugin</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/3/16157498aa157d6d?imageView2/1/w/1304/h/734/q/85/format/webp/interlace/1&quot; title=&quot;alt:å¦‚ä½•åœ¨ ionic 3 ä¸­ä½¿ç”¨ URL Scheme&quot;&gt;
&lt;h3 id=&quot;è™¾æ‰¯è›‹ğŸ¥š&quot;&gt;&lt;a href=&quot;#è™¾æ‰¯è›‹ğŸ¥š&quot; class=&quot;headerlink&quot; title=&quot;è™¾æ‰¯è›‹ğŸ¥š&quot;&gt;&lt;/a&gt;è™¾æ‰¯è›‹ğŸ¥š&lt;/h3&gt;&lt;p&gt;ç¬¬ä¸€æ¬¡åœ¨æ˜é‡‘å†™ä¸œè¥¿ï¼Œæœ‰ç‚¹ç´§å¼ ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä¸ºå•¥å†™è¿™ä¸ªï¼Œæ˜¯å› ä¸ºæˆ‘æœ€è¿‘ç”¨ ionic å¼€å‘ä¸€ä¸ª app ï¼Œéœ€è¦ç”¨ URL Scheme ã€‚æè¿™ä¸ª URL Scheme æŠ˜è…¾äº†ä¸€ä¸‹ï¼Œæ‰€ä»¥å†™ä¸‹æ­¤æ–‡ï¼Œå¹¶åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ã€‚ğŸ˜&lt;/p&gt;
&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯-URL-Schemeâ“&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-URL-Schemeâ“&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ URL Schemeâ“&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ URL Schemeâ“&lt;/h3&gt;&lt;p&gt;ç®€å•çš„è¯´ï¼ŒURL Schemeå°±æ˜¯ä¸€ä¸ªå¯ä»¥è®©appç›¸äº’ä¹‹é—´å¯ä»¥è·³è½¬çš„åè®®ã€‚åˆ—å¦‚ï¼šå¾®ä¿¡çš„ URL Scheme å°±æ˜¯ &lt;code&gt;weixin://&lt;/code&gt;ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ &lt;code&gt;weixin://scanqrcode&lt;/code&gt; å¯ä»¥è·³è½¬åˆ°å¾®ä¿¡çš„æ‰«ä¸€æ‰«åŠŸèƒ½ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="https://blog.johnmai.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Ionic" scheme="https://blog.johnmai.top/tags/Ionic/"/>
    
      <category term="JavaScript" scheme="https://blog.johnmai.top/tags/JavaScript/"/>
    
      <category term="Angular" scheme="https://blog.johnmai.top/tags/Angular/"/>
    
      <category term="Android" scheme="https://blog.johnmai.top/tags/Android/"/>
    
      <category term="IOS" scheme="https://blog.johnmai.top/tags/IOS/"/>
    
      <category term="App" scheme="https://blog.johnmai.top/tags/App/"/>
    
  </entry>
  
</feed>
